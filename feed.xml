<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>咀嚼之味</title>
    <description>咀嚼之味是我分享我对编程与生活的见解之地。我喜欢做一些安静的事，比如看书、看电影、听音乐、散步以及旅行。</description>
    <link>https://jerryzou.com/</link>
    <atom:link href="https://jerryzou.com/feed.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>脑袋装不下就会吐，读书虽好，不可贪杯</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;本文共 1,200 字，预计阅读时间 4 分钟。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;在 2024 年的最后一天，我打开微信读书，最后的统计数字定格在 365 小时。“日均阅读 1 小时，比去年上升 151%”，屏幕上这么显示着，我悄悄松了一口气。&lt;/p&gt;

&lt;p&gt;似乎就是为了这么一个凑数的目标，挑起了我的强迫症和胜负心，一如我小时候走瓷砖必须避免踩到边线一样。我自己也说不清楚为什么觉得这个数字很重要。&lt;/p&gt;

&lt;p&gt;说实话，这两年我的脑袋越来越不好使了。有人说，记忆力好等同于聪明——这样看，我现在蠢得过头。糟糕的记忆力让我脑袋最多只能装下最新读的一本书的内容，大概也就 5 小时吧。我会在餐桌上跟同伴分享自己刚学习到的肛肠科知识——你知道“十男九痔”吗？——神经病！&lt;/p&gt;

&lt;p&gt;可再上一本读过的书是什么来着？让我打开 App 再看一眼……噢……这才有点印象。&lt;/p&gt;

&lt;p&gt;那我为什么还要花 365 小时来读这么多乱七八糟的，完全记不住的书呢？&lt;/p&gt;

&lt;p&gt;倒不如说，我早已坦然接受了——我就是记不住，但没关系，我更在意的是读某一本书时当下那种感觉，将那种抽象的、难以言语的感受变成一颗星星，埋藏在心里。我知道我记不住多少，而一旦触发了某个“提示词”，内心的星星们会连成线，新的想法便随之诞生。（太多人说我像GPT了，我就是了，怎么地！&lt;/p&gt;

&lt;p&gt;而且啊，我对这个世界正在发生的事情太好奇了。无数的谜团只有细细咀嚼才能品味到幽香。&lt;/p&gt;

&lt;p&gt;新疆的伊斯兰教起源是怎么样的？&lt;br /&gt;
维吾尔族和回族有什么区别？&lt;br /&gt;
中东地区的矛盾开端是什么？&lt;br /&gt;
为什么人会感到无聊？&lt;br /&gt;
工作的意义是什么？&lt;br /&gt;
我活着的意义是什么？&lt;br /&gt;
我为什么开心？为什么不开心？&lt;br /&gt;
一个长期存活的企业会是怎么样的？&lt;br /&gt;
为什么这个世界总是不断上演着荒诞的戏码？&lt;br /&gt;
根管治疗是什么？&lt;br /&gt;
牙桥和种植牙的区别是什么？&lt;br /&gt;
李娟是谁？&lt;br /&gt;
我怎么这么多为什么？&lt;/p&gt;

&lt;p&gt;最终，我吐了。并不是物理上的呕吐，而是精神上的呕吐——整个 11 月读了 55 小时的书，我受不了了。过量的知识摄入让我的脑子翻江倒海，最终遭到了反噬！之后的两周我都没有再打开任何一本书。好在后来一切恢复如常，再无知识反刍的新案例。&lt;/p&gt;

&lt;p&gt;语言是智慧的居所。我通过啃食大量的人类著作来理解这个特别的、拥有语言的种群，不断地在内心星空中放入新的星星。随着新的星星的加入，旧的星星或被点亮，或被遗弃。这一年读了不少有意思的书，甚至有多次点亮内心星空的状态，多巴胺此时推向高点。&lt;/p&gt;

&lt;p&gt;也许是我感到与人类沟通之困难，我今年读了好几本跟沟通相关的书——从“如何成为一个好销售”，到“如何真诚地倾听他人”。读的时候恍然大悟，放下书之后又感到茫然无措。语言真是一个神奇的玩意儿，一个词汇在不同语境、不同心境下、不同的认识水平下会展现出截然不同的各种含义。直到我读到了一本奇书：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;《关于说话的一切》&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;这本书在微信读书只有 70% 的推荐值，一定不是适合所有人的，但它是我心目中的神作。不少评论称这本书故作深沉，故弄玄虚，但我却看到了作者汤质的赤子之心，他把自己的脑子剖开来给我看了——蛛网膜下的脑血管纵横交错，粉嫩脆弱的大脑在我面前微微颤动。&lt;/p&gt;

&lt;p&gt;这本书的书名看起来像教你说话技巧的畅销书，实则是一本重思辨的，刨根问底地探寻语言本质的书。如果你爱思考、有一些哲学阅读量，我向你强烈推荐此书！甚至先抛开那些真实存在的人，它在我眼中可能是与 AI 展开高效对话的金钥匙。&lt;/p&gt;

&lt;p&gt;一个人是自己过去所有经验的总和，换句话说，来自这个经验世界外的所有推荐都是没有意义的。但我又无时无刻不在享受着这种徒劳的快乐。&lt;/p&gt;

&lt;p&gt;祝大家在新的一年里能在自己的精神世界里探索到孩童般的快乐，passion！！！&lt;/p&gt;
</description>
        <pubDate>Wed, 01 Jan 2025 04:00:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/reading-is-good-but-dont-overdo-it/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/reading-is-good-but-dont-overdo-it/</guid>
      </item>
    
      <item>
        <title>命数与劫难，占卜与鬼神</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;本文共 2,800 字，预计阅读时间 10 分钟。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;你相信命中注定吗？还是觉得人定胜天？&lt;br /&gt;
你信奉宗教吗？还是坚定的无神论者？&lt;br /&gt;
你喜欢占卜、星象、风水、算命吗？&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;咱们中国是无神论国家，信马列不信鬼神。但新中国才成立 75 年，鬼神信仰一直存在于中华大地上。老一辈人，尤其是福建广东一带，对风水尤其看重。无论是阴宅还是阳宅，都要让风水大师看上一看。他们相信，祖宗在阴宅里躺的安稳，子子孙孙都能得到荫蔽，大富大贵，步步高升。&lt;/p&gt;

&lt;p&gt;我爸常在酒桌上提起一件轶事——他是我的救命恩人。这还要说到我妈当年怀我的时候。我有一个同父同母的胞姐，比我大一岁。那时候农村里特别重男轻女，我妈担心第二个孩子还是女娃，于是托人找神婆算了一卦。神婆笃定地说你这怀里必然还是一胎女孩儿。我妈就犹豫着这个孩子该不要了。这时候我爸就站出来了，说女孩也行，就生下来吧。得亏了我爸，不然我幼小的阴魂就要在邹家祠堂里飘荡着了。不过我出生以后还是干了件恶事，我爸妈觉得 “阳” 这个名字适合男孩，所以把此名转赐给了我。“阳阳”便成为了我姐的曾用名。&lt;/p&gt;

&lt;p&gt;后来上了小学，我也加入了迷信派。我半夜躺在床上，拿被子整个盖住全身，从外边看俨然一个小帐篷。我半跪着向西边磕了个头，祈祷上帝保佑我考试顺利。再往东边磕了个头，祈祷佛祖保佑。北边的太上老君和南边的菩萨也各来了几下。大半夜的我也不敢磕得太响，就轻轻地磕。磕完以后就跟他们说，到时候谁比较灵验，我就皈依谁家。小小年纪就有让各路神仙卷起来的想法，不得了。可我小时候不懂啊，人佛祖也是西天的，我往东边磕头显然是摆错码头了。考试结果果然糟糕。&lt;/p&gt;

&lt;p&gt;长大以后我就不再搞封建迷信活动了，去寺院也是有一搭没一搭地四处看看，跟佛祖点头示意一下自己来过了。可能多少还是埋怨他当初不帮忙。&lt;/p&gt;

&lt;p&gt;越难熬的日子，寺院的香火越是鼎盛。我发现身边喜欢算命、礼佛的年轻人可是越来越多了，说明现在的日子是越来越难过了。我会时常庆幸自己出生得早，还是挺幸运的，要是自己晚生几年，真的很难面对当今的时局，可能我也会找不到工作。&lt;/p&gt;

&lt;p&gt;有人说这就是命，在这几年毕业的同学就是遭上了这一劫。于是面对焦虑、痛苦、绝望，有人诉诸神秘，想知道这段低谷期在何时才能过去。算命占卜的风气有抬头的趋势。&lt;/p&gt;

&lt;p&gt;这时一个一直停留在我心中的疑问浮出了水面：算命到底是怎么一回事？&lt;/p&gt;

&lt;h2 id=&quot;算命占卜中的骗术&quot;&gt;算命占卜中的骗术&lt;/h2&gt;

&lt;p&gt;我一直不太相信命数的存在。算命的结果是一种强烈的暗示，当它告诉我，我在什么时候会如何如何时，我心里的念想就会被这股神秘的力量牵着鼻子走。如果它最终应验了，也是这种暗示成功了；如果它并未应验，好像算命大师也不会受到什么惩罚。这完全是一个可以张口乱来的玩意儿。我通过尽可能地不算命，来抵御它对我的影响。&lt;/p&gt;

&lt;p&gt;而最近读了一本关于算命骗术的书印证了我的猜想。这本书以半纪实半小说的形式，诉说了从清代到民国时期的一个骗子帮派——江相派的故事。传言江相派的根本目的在于反清复明、劫富济贫，颇有一丝义匪的感觉。在民国时期的国统区，大量贪污腐败横行，乐于学习阴阳术数的官员不少，很多人愿意为鬼神卜筮掏大把银子。后续随着解放区的逐渐扩大，民众深信鬼神的人越来越少，江相派也都混不下去了（加上建国初大量江相派人士被判刑），这股势力才慢慢消散。&lt;/p&gt;

&lt;p&gt;江相派内部有文骗子和武骗子的区别。文骗子研究易经、风水理论，负责整理话术；武骗子负责接应，有时需要出手伤人，有时则需要施展“扎飞之术”，即运用各种物理、化学或药理知识来装神弄鬼。&lt;/p&gt;

&lt;p&gt;其中最关键的是行骗心理学。江相派有六字真言：审、敲、打、千、隆、卖。绝大多数行骗的人并没有什么易学基础，全靠熟练运用这六个字。以下引用书中的原话作解释：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;简单地讲，&lt;strong&gt;审&lt;/strong&gt;，就是审度，包括对方的衣着、气质，贫贱富贵都是带相的，一眼就可定这个人的档次。审的第二层意思，是倾听，让对方说出来，多说话，话越多，信息就越多。&lt;br /&gt;
&lt;strong&gt;敲&lt;/strong&gt;，就是试探，所谓：一敲即中随棍打，再敲不吐草寻蛇。是在审的基础上，突然“敲”一下，如果说准了，那就可以用“打”字诀了，如果两次都没敲准，那就危险了，如同草中寻蛇，弄不好被蛇咬口。到了“草寻蛇”的地步，一般阿宝就“抛刀”了。&lt;br /&gt;
&lt;strong&gt;打&lt;/strong&gt;，就是坚定地批断。“打”贵在一个急字，突然出口，落地有声。打的更深一层意思是，摧毁对方的意志。因为你“敲”准了，所以他对你深信不疑，那么你就说他未来要倒霉，高官说他要丢官，巨贾说他要破财，怨妇说她要被甩，“打”得对方心理防线彻底崩溃。&lt;br /&gt;
&lt;strong&gt;千&lt;/strong&gt;，就是骗。可以当场出千，也可以通过布局的方式。“千”是融汇在其他五个字之中的，贵在一个“慢”字，出千不能着急，否则就露了马脚，所以叫“急打慢千”。&lt;br /&gt;
&lt;strong&gt;隆&lt;/strong&gt;，就是奉承，说对方爱听的，许之以希望。因为你“打”了他，他很害怕，心情落到低谷，此时你“隆”他一下，告诉他也不是没有希望了，如果按照你说的办，还是能够化险为夷，逢凶化吉。然后再“隆”一下，告诉他如果过去这个坎，那么就会大富大贵，长命百岁，他自然非常高兴。&lt;br /&gt;
“打”和“隆”是对应的，先让对方绝望，再给他希望，此时，对方已被牢牢拴住。“打”和“隆”其实都是“千”的手段，是不能分开的。如果只是出“打”千，千出得再好也没用，因为对方绝望了，反正就是这命，认了，也就不会上钩了。……&lt;br /&gt;
最后一个字是“&lt;strong&gt;卖&lt;/strong&gt;”，是一种挥洒自如的境界。你怎么说，对方就怎么听了。卖的第二层含义就是该收钱了。所有的一切，最后都是为了对方兜里白花花的银子，所以卖也要卖得干净利索。&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;太牛了，一下子就把我内心中对算命的不良感受解释得一清二楚。人只要有焦虑的感受出现，就变得异常脆弱，极可能受到骗子的利用。&lt;/p&gt;

&lt;p&gt;但一些新问题在我脑袋里萌芽了。&lt;/p&gt;

&lt;h2 id=&quot;真正的易经&quot;&gt;真正的易经？&lt;/h2&gt;

&lt;p&gt;占卜这个手段确实很容易被骗子利用。但占卜、算命、风水本身就是没有意义的吗？如果一个好人去使用占卜、算命这种工具，事情又会怎样发展呢？真正的易经、术数、八卦到底是什么意思？&lt;/p&gt;

&lt;p&gt;我尝试去读了一段易经，不愧是四书五经中最难的理解的一本。晦涩，真是晦涩！宋代大儒朱熹曾说“《易》难看，不比他书”。古人诚不欺我。&lt;/p&gt;

&lt;p&gt;大概看了十几个卦的卦辞、爻辞（即卦象的解释），我悟了！爻辞中小部分是一些封建观念思想，而大部分都是蕴含人生哲理的话。换句难听的话说，就是怎么都不会错的鸡汤文。例如乾卦上九爻：“上九：亢龙有悔”，指龙已经飞得太高，但因为自身的骄傲，已经没有人愿意帮它了，它便有所悔悟。再例如大有卦六五爻：“六五：厥孚交加，威如，吉。”，即坚持以诚信的准则与人交往，对上尊敬，对下怀柔，并不会减少个人的威严，可获吉祥。&lt;/p&gt;

&lt;p&gt;天、地、雷、泽、风、火、山、水——易经中的八卦都来自于自然。古人倡导人从自然的有序和无常中学会人生的道理。能写出易经的人绝对是个天才。可惜被一群心术不正的人拿去诈骗！&lt;/p&gt;

&lt;h2 id=&quot;占卜与鬼神的疗愈作用&quot;&gt;占卜与鬼神的疗愈作用&lt;/h2&gt;

&lt;p&gt;有一句古话，“不为良相，便为医卜”。&lt;/p&gt;

&lt;p&gt;这句话推敲一下还颇有意思。古时候巫、医不分家。对医学认识比较粗浅的时候，是分不清疾病来自于生理还是心理的。家里的老爷染上糟糕的病症，找大师过来给算上一卦，有时就能解了心疾。&lt;/p&gt;

&lt;p&gt;放到当代，占卜与鬼神也绝对是疗愈心灵的一把好手。世道艰险，太多的人生难题摆在当代人面前。面对未知时，人总是很渺小无力的。你不知道亲人染上疾病还是否有机会康复；你不知道自己何时能找到相伴一生的人；你不知道在当前糟糕的就业环境中能否找到一份好工作；你不知道买了不久的房子已经把首付跌没了之后自己该何去何从；你不知道你的孩子长大后会不会面临更大的困难；你不知道自己的脂肪肝还有没有机会消融。&lt;/p&gt;

&lt;p&gt;这个时候，你抛开杂念，步入宁静的寺院。双手合十，仰望高耸威严的佛像，以虔诚的心态渴求神灵的垂怜。走到寺院门口，你求得了一支上签，为你算卦的道人解释道：近年积德行善，三年内必修成正果。此时你的内心变得一片澄澈，安宁无比。&lt;/p&gt;

&lt;p&gt;信鬼神，便不再需要独自面对人生终极问题的袭扰（我是谁？我从哪里来？我要往哪里去？）。答案已经非常明确了：我是神明的子民，神明创造了我，我将穷极一生来侍奉神明。&lt;/p&gt;

&lt;p&gt;信鬼神、懂卜筮，相信命中注定，人就会得到幸福。对吗？——不同的人心中会有各自的答案。&lt;/p&gt;
</description>
        <pubDate>Tue, 08 Oct 2024 04:00:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/divination-and-god/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/divination-and-god/</guid>
      </item>
    
      <item>
        <title>停止创作综合症</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;本文共 1,800 字，预计阅读时间 6 分钟。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;最近有一段时间很低落，我决定对自己诊断一番。自从我读了几本跟人体健康、心理健康相关的书籍之后，我掌握了一种新的技能——给自己看病。&lt;/p&gt;

&lt;p&gt;是的，我会分裂出两个人格，病人人格和医生人格。病人人格讲述最近发生的事情，而医生人格通过提问来引导病人人格说更多的话，从中抓出一些蛛丝马迹来做出医疗诊断。&lt;/p&gt;

&lt;p&gt;这次我的诊治失败了——我说不清自己低落的原因。&lt;/p&gt;

&lt;p&gt;我感觉自己好像睡不够，即便每天睡够了 7 个小时，但依然感觉到很疲劳。睡醒之后我也完全没有精力充沛的感觉。喝了冰美式后会好一阵子，但很快又会恢复疲劳的状态。整个 8 月我在地铁上的阅读时间大幅度缩短，早高峰的地铁上我不再能专注地阅读一本书了。为什么啊？&lt;br /&gt;
即使在 18:30 按时下班，我到家后仍睁不开眼睛。我干不了任何其他事儿了。计划回家后要干的事情无限期延后。我废了？！为什么啊？&lt;br /&gt;
虽然工作中有些不尽如人意的部分，但我发自内心觉得，一切都走在良好的轨道上，一派欣欣向荣之状。可我依然忧心忡忡。为什么啊？&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;我的医生人格在进行了长时间的随访后，仍然无法确定我得了什么病。&lt;br /&gt;
直到有一天早上，我问了自己一个问题：“我最近干了什么呀？” 沉默了片刻，我发出了感叹：“我好像停止创造了。” 一道闪电突然穿透了我的脑子——停止创造综合症，就是这个！我在地铁上激动地跳了起来！&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;停止创造综合症并不是什么科学的名字，纯粹是我为自己所面临的困境生造出来的名词。它是来自于我内心对自己的审判：“你得注意了，你已经很长时间没有创造价值了。”&lt;/p&gt;

&lt;p&gt;真是好笑！何必费心劳力去追寻所谓的意义呢。不创造价值不行吗？稍微躺平一些不舒服吗？&lt;/p&gt;

&lt;p&gt;我仔细思索了一番。不创造价值还真是让我不舒服！&lt;/p&gt;

&lt;p&gt;我喜欢创造。写代码就是一项高性价比的创作活动，只需要一台电脑，基本没有额外的成本。我很庆幸自己选择了一个充满创造力的工作领域。我曾畅想老年的我会热衷于哪些事情？做独立游戏，做木工，写小说，种地，这些都是我的选项之一。&lt;/p&gt;

&lt;p&gt;遥想大三时，&lt;a href=&quot;https://www.bilibili.com/video/BV1QW411E7W5/?spm_id_from=333.337.search-card.all.click&amp;amp;vd_source=64f079cab7d60162f3c7a4f9a51c6f06&quot;&gt;Indie Game: The Movie 纪录片&lt;/a&gt;把我看得热血沸腾。我当即就想成为一个牛逼的游戏开发者，后来还报名了网易游戏的暑期实习生，想做一名游戏策划。但面试过程给我浇了一盆冷水，我发现大型商业游戏的研发过程完全没有我想象中的创造性。于是我退却了，坚定自己要做就做独立游戏，发誓不进大型游戏公司。&lt;/p&gt;

&lt;p&gt;最后的结果是，我不断地在小公司中盘桓，因为我相信我在小而美的公司中是最有机会参与创造的。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;积极的方面是，我的性格让我从事创造性工作时很容易进入心流的状态。但随之而来的负面效应是：当我感受不到我所从事的工作的意义时，我就会陷入焦虑与迷茫。&lt;/p&gt;

&lt;p&gt;帮助他人，是创造吗？&lt;br /&gt;
管理，是创造吗？&lt;br /&gt;
培养，是创造吗？&lt;br /&gt;
开会，是创造吗？&lt;/p&gt;

&lt;p&gt;当我和自认为的创造活动渐行渐远时，我内心深处的不安感正在一点点地累积起来。渴望创造的本性受到了压抑。压抑导致情绪的低落。情绪的低落导致可用于创造的时间越来越短。可用于创造的时间越来越短引发了更大的压抑。一个无限向下的漩涡正在产生，我慢慢地透不过气来了。&lt;/p&gt;

&lt;p&gt;以上就是我的医生人格分析出来的一切，谢谢他。当他告诉我这一切时，我就已经好多了。不知道自己因何而病的感觉消失了，我该着手治好自己了！&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;治疗过程过于抽象，由于是完全发生在我自己脑海中的过程，就不展开了。但整个治疗过程让我想明白了很多有趣的事实。&lt;/p&gt;

&lt;p&gt;一&lt;br /&gt;
在很多大公司中，尤其是外企，个人的职业选择可以是在专业线上一条走到黑的。他可以一辈子从事非常直接的创造性工作而不需要涉足管理领域，俗称 IC (Individual Contributor)，即独立贡献者。曾经听说有些老牌软件公司中有非常资深的白头发老爷爷长期待在一线程序员岗位上，并且非常自豪于自己的工作。&lt;br /&gt;
而我以正式员工身份加入过的所有公司全都是小公司。在小公司是很难孵化出 IC 角色的。我有时候真会想我啥时候能转做 IC 啊，去享受一下纯粹创造的快乐。爽！&lt;br /&gt;
对很多程序员来说，辞职做开源/独立开发者是极具诱惑力的。个中道理，想必是一致的。&lt;/p&gt;

&lt;p&gt;二&lt;br /&gt;
写代码、写文章、写文档于我来说，都是止痛片，是精神鸦片。&lt;br /&gt;
它们能短暂地治疗我的虚无感，但有时它们只是看起来像创造，而事实上不是。&lt;br /&gt;
虚假的创造无法治疗“停止创造综合症”。&lt;/p&gt;

&lt;p&gt;三&lt;br /&gt;
我曾一度很喜欢乐高。但内心的不安和一次追问导致了变化：“乐高到底算不算创造？” 我发现如果我只是把一套乐高模型按说明书将碎片还原成一个完整的模型。这个动作并不是创造，而是复制了设计师的创造。&lt;br /&gt;
乐高支持我们使用原始的碎片设计我们自己的模型，这算是创造。然而我又不愿意为这样的创造付出更多的时间。&lt;br /&gt;
于是拼装乐高模型对我来说的效用还不如扫地。拼装模型和扫地都能让我内心获得一丝平静，而且都挺费腰的。但我选择扫地，因为不用花钱。&lt;/p&gt;

&lt;p&gt;四&lt;br /&gt;
有一些追问可以辅助治疗“停止创作综合症”，以供参考：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;除了客观的物质世界，精神世界是真实存在的吗？&lt;/li&gt;
  &lt;li&gt;价值创造是客观过程还是主观过程？&lt;/li&gt;
  &lt;li&gt;对精神世界的重塑是否是价值创造过程？&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;总而言之，&lt;/p&gt;

&lt;p&gt;距离上一篇文章过去已 2 年有余，我很开心我重新开始创造了，就从这篇文章开始。&lt;/p&gt;

&lt;p&gt;对我来说，要好好活下去，就不要停止创造。&lt;/p&gt;
</description>
        <pubDate>Sat, 31 Aug 2024 15:42:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/stop-creating-syndrome/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/stop-creating-syndrome/</guid>
      </item>
    
      <item>
        <title>ChatGPT Prompt 编写指南</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;本文共 3,200 字，预计阅读时间 10 分钟。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;写在最前面&quot;&gt;写在最前面&lt;/h3&gt;

&lt;p&gt;如果你对 ChatGPT 有基本的了解，有过一些和 ChatGPT 的对话，但不太清楚如何更好地使用这个工具。这篇文章便是为你而写。
如果你还不知道 ChatGPT 是什么，或者还没有尝试过和 ChatGPT 对话，建议先去尝试一下再回头看这篇文章。&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;在自然语言处理这个领域，大众消费市场的语音助手们在很长的一段时间里都给人们一种“人工智障”的感觉。无论是 Siri 还是小爱同学，都只能针对特定的场景给出较好的响应，但只要超出那些场景，他们大多只会答非所问。&lt;/p&gt;

&lt;p&gt;随着 ChatGPT 等大语言模型的普及，Google 深度学习科学家弗朗索瓦·肖莱对此的评论是：“&lt;strong&gt;人工智能的第三次夏天到来了。&lt;/strong&gt;” ChatGPT 是有史以来用户数以最快速度过亿的一款应用。最近，我在各种社交媒体上总是能够被各种 AI 相关的新闻和消息轰炸。有人对 AI 的快速发展感到忧惧，有人对 ChatGPT 当前的推理和逻辑运算能力嗤之以鼻，有人在散播大量人类岗位即将被 AI 取代的恐慌，有人则嘲笑另一批人在对深度学习缺乏了解的情况下盲目焦虑。&lt;/p&gt;

&lt;p&gt;其中有一种观点我特别认同：AI 就是大脑的“外骨骼”，能够极大地强化、扩展你的大脑能力。目前还很难预知某个岗位是否会真正被 AI 彻底取代，但可以预知的是，懂得如何运用 AI 技术将是未来一段时间内最重要的能力。&lt;/p&gt;

&lt;p&gt;目前大众接触最多的 ChatGPT 使用的底层模型还是 GPT-3.5，它在推理和逻辑计算方面还显得非常稚嫩。但 ChatGPT 所表现出的对人类自然语言的理解能力是非常惊人的，他可以很好地理解语言中的情绪。许多人已经从这款工具上获得了工作效率的成倍提升。掌握这款工具最重要的部分就在于“如何写好 prompt”。&lt;/p&gt;

&lt;p&gt;Prompt 直译成中文是“提示”的意思。有人戏称写 Prompt 就像魔法师念咒语一样，不同 prompt 所引导出的回答效果差异非常巨大。目前互联网上能找到很多 Prompt 现成案例（比如 &lt;a href=&quot;https://github.com/f/awesome-chatgpt-prompts&quot;&gt;Awesome ChatGPT prompts&lt;/a&gt; 和 &lt;a href=&quot;https://newzone.top/chatgpt/&quot;&gt;ChatGPT Shortcut&lt;/a&gt;）。你可以直接拿别人写好的“咒语”来使用，很多效果确实不错。但从“如何写好 prompt”角度出发的内容就少得多了。&lt;/p&gt;

&lt;p&gt;目前我找到最好的学习资料是：&lt;a href=&quot;https://github.com/dair-ai/Prompt-Engineering-Guide&quot;&gt;https://github.com/dair-ai/Prompt-Engineering-Guide&lt;/a&gt;，非常推荐大家阅读！在本文中，我将从中整理出一些能快速理解的简单技术，帮助你们理解如何优化、迭代自己的“咒语”。&lt;/p&gt;

&lt;h2 id=&quot;一第一原则明确的意图&quot;&gt;一、第一原则：明确的意图&lt;/h2&gt;

&lt;p&gt;你需要&lt;strong&gt;明确地表达&lt;/strong&gt;你的意图和要求，尽可能具体、描述性、详细地描述所需的上下文、你期望的结果等。你的要求越明确，越有希望获得你想要的答案。&lt;/p&gt;

&lt;p&gt;糟糕的案例 ❌&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;写一首关于OpenAI的诗。&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;更好的案例 ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;以莎士比亚的风格写一首短小的、鼓舞人心的诗，重点关注最近DALL-E产品推出（DALL-E是一种文本到图像的ML模型）的事情。&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;上面的例子明确提出了几点要求：&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;以莎士比亚的风格&lt;/li&gt;
  &lt;li&gt;短小的、鼓舞人心的&lt;/li&gt;
  &lt;li&gt;跟 DALL-E 产品相关的&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;由于 ChatGPT 只掌握了 2021 年的知识，可能不知道 DALL-E 是什么，我们还在 prompt 里简单解释了 DALL-E，帮他理解模棱两可的概念。&lt;/p&gt;

&lt;h2 id=&quot;二理解-prompt-的主要构成&quot;&gt;二、理解 Prompt 的主要构成&lt;/h2&gt;

&lt;p&gt;Prompt 的主要构成有：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Instruction 指令&lt;/strong&gt;：您想让模型执行的特定任务或指令&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Context 上下文&lt;/strong&gt;：可以涉及外部信息或附加上下文，可以引导模型产生更好的响应&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Input Data 输入数据&lt;/strong&gt;：我们感兴趣的输入或问题（以期望 ChatGPT 给出解答）&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Output Indicator 输出提示&lt;/strong&gt;：表示希望 ChatGPT 以什么形式来输出结果&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;接下来用几个 Prompts 来加深理解：&lt;/p&gt;

&lt;p&gt;案例一&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;我希望你能担任私人教练的角色。我会提供你一个想通过体育锻炼变得更健康的人的信息，而你的角色是根据他们现有的健康水平、目标和生活习惯，为这个人设计最佳的计划。你应该利用你对运动科学、营养建议的知识，来为他们创建一个适合他们的计划。我第一个要求是：“我需要帮助为想减肥的人设计一个锻炼计划。”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;其中，&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;上下文&lt;/strong&gt;：我希望你能担任私人教练的角色。我会…，来为他们创建一个适合他们的计划。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;指令&lt;/strong&gt;：我第一个要求是：“我需要帮助为想减肥的人设计一个锻炼计划。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;案例二&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;翻译成英文：如今 ChatGPT 给人带来的最大的震撼在于，他看起来真的理解了我们的提问，无论怎样的问题，他总能围绕问题作出解答。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;指令&lt;/strong&gt;：翻译成英文：&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;上下文&lt;/strong&gt;：如今 ChatGPT 给人带来的最大的震撼在于，… 他总能围绕问题作出解答。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;案例三&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;为特定的亚马逊产品特征撰写亚马逊的标题、五点和搜索关键词。输出内容为英文。五点的每一点都要超过 20 个单词。&lt;/p&gt;

  &lt;p&gt;输出格式为：&lt;/p&gt;

  &lt;p&gt;标题：&lt;/p&gt;

  &lt;p&gt;搜索关键词：&lt;/p&gt;

  &lt;p&gt;五点：1. &lt;content&gt;; 2. &lt;content&gt;; 3. &lt;content&gt;; ...&lt;/content&gt;&lt;/content&gt;&lt;/content&gt;&lt;/p&gt;

  &lt;p&gt;该产品的特征是：”””&lt;/p&gt;

  &lt;p&gt;[品牌] 防切割手套，Level A6 防切割级别，透气，舒适性强，黑色，适用于仓库、货运、钓鱼、园艺、木工，从 XS 到 XXL 码齐全，适用于各种人群需求。&lt;/p&gt;

  &lt;p&gt;”””&lt;/p&gt;

&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;指令&lt;/strong&gt;：为特定的亚马逊产品特征撰写亚马逊的标题、五点和搜索关键词。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;上下文&lt;/strong&gt;：输出内容为英文。五点的每一点都要超过 20 个单词。&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;输出提示&lt;/strong&gt;：输出格式为：…&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;输入数据&lt;/strong&gt;： 该产品的特征是：””” [品牌] 防切割手套，… 适用于各种人群需求。”””&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;三一些-prompt-的优化迭代技术&quot;&gt;三、一些 Prompt 的优化迭代技术&lt;/h2&gt;

&lt;p&gt;使用以下的方法，不断地优化你的 prompt。&lt;/p&gt;

&lt;h3 id=&quot;1-框选你想表达的重点信息&quot;&gt;1). 框选你想表达的重点信息&lt;/h3&gt;

&lt;p&gt;使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;###&lt;/code&gt; 或 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;&quot;&quot;&lt;/code&gt; 等符号框选重点信息。使用符号来断开不同类型的内容会显著提升 ChatGPT 对内容的理解能力。&lt;/p&gt;

&lt;p&gt;糟糕的案例 ❌&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;将下面的文本总结为最重要的要点的项目符号列表。&lt;/p&gt;

  &lt;p&gt;如今 ChatGPT 给人带来的最大的震撼在于，他看起来真的理解了我们的提问，无论怎样的问题，他总能围绕问题作出解答…………………&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;更好的案例 ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;将下面的文本总结为最重要的要点的项目符号列表。&lt;/p&gt;

  &lt;p&gt;文本：”””&lt;/p&gt;

  &lt;p&gt;如今 ChatGPT 给人带来的最大的震撼在于，他看起来真的理解了我们的提问，无论怎样的问题，他总能围绕问题作出解答…………………&lt;/p&gt;

  &lt;p&gt;”””&lt;/p&gt;

&lt;/blockquote&gt;

&lt;h3 id=&quot;2-指定结果的输出格式&quot;&gt;2). 指定结果的输出格式&lt;/h3&gt;

&lt;p&gt;当你期望 ChatGPT 的输出内容具有一定结构时，把你的期望表达出来。&lt;/p&gt;

&lt;p&gt;糟糕的案例 ❌&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;从下面的文本中提取所有的人名和他们的职业。&lt;/p&gt;

  &lt;p&gt;文本：”””&lt;/p&gt;

  &lt;p&gt;设计师小牛陪小王去小李家做客，小李的老婆厨师小丁做了一道红烧带鱼。小王说“非常好吃！”&lt;/p&gt;

  &lt;p&gt;”””&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;更好的案例 ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;从下面的文本中提取所有的人名和他们的职业。&lt;/p&gt;

  &lt;p&gt;输出的格式：&lt;人名&gt;(&lt;职业&gt;)，&lt;人名&gt;(&lt;职业&gt;)，...&lt;/职业&gt;&lt;/人名&gt;&lt;/职业&gt;&lt;/人名&gt;&lt;/p&gt;

  &lt;p&gt;文本：”””&lt;/p&gt;

  &lt;p&gt;设计师小牛陪小王去小李家做客，小李的老婆厨师小丁做了一道红烧带鱼。小王说“非常好吃！”&lt;/p&gt;

  &lt;p&gt;”””&lt;/p&gt;

&lt;/blockquote&gt;

&lt;h3 id=&quot;3-act-as-trick-确定-chatgpt-的立场&quot;&gt;3). “Act as” trick 确定 ChatGPT 的立场&lt;/h3&gt;

&lt;p&gt;针对一些问题，尤其是开放性问题。整个互联网可能存在上百甚至上千万中答案，为 ChatGPT 设定立场有助于它找到最符合自己人设（也最符合你需要的）一种答案。&lt;/p&gt;

&lt;p&gt;糟糕的案例 ❌&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;你如何看待婚姻？&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;更好的 ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;请作为女权主义者，回答以下问题：”你如何看待婚姻？”&lt;/p&gt;

  &lt;p&gt;or&lt;/p&gt;

  &lt;p&gt;请作为大男子主义者，回答以下问题：”你如何看待婚姻？”&lt;/p&gt;

&lt;/blockquote&gt;

&lt;h3 id=&quot;4-few-shot-教教他给-chatgpt-一些案例&quot;&gt;4). Few-shot 教教他，给 ChatGPT 一些案例&lt;/h3&gt;

&lt;p&gt;对于 ChatGPT 熟悉的任务，你可能不需要给他任何例子（Zero-shot）比如，你给他 10 条评价某一个商品的 Review，让 ChatGPT 判断多少条是积极的，多少条是消极的。他通常可以直接给你正确的结果。因为它本身对情绪的理解能力已经很强了。但如果您正在尝试让 ChatGPT 做一件他不熟悉的事情，那可能需要提供更多案例。&lt;/p&gt;

&lt;p&gt;ChatGPT 已经熟悉的任务，不需要案例。即 zero-shot ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;请识别下列评论的态度是怎么样的？给他们的态度打个分，1-10分，1分最消极，10分最积极&lt;/p&gt;

  &lt;p&gt;评论：&lt;/p&gt;

  &lt;p&gt;太难吃了，再也不回来了。&lt;/p&gt;

  &lt;p&gt;环境很糟糕。&lt;/p&gt;

  &lt;p&gt;亚米亚米，会再来！&lt;/p&gt;

  &lt;p&gt;什么鬼玩意儿。&lt;/p&gt;

  &lt;p&gt;再见！&lt;/p&gt;

  &lt;p&gt;💥💥💥💥💥&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;糟糕的案例 ❌&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;请将以下文本归类到三个字母：X/Y/Z&lt;/p&gt;

  &lt;p&gt;文本：&lt;/p&gt;

  &lt;p&gt;太难吃了，再也不回来了。&lt;/p&gt;

  &lt;p&gt;环境很糟糕。&lt;/p&gt;

  &lt;p&gt;亚米亚米，会再来！&lt;/p&gt;

  &lt;p&gt;什么鬼玩意儿。&lt;/p&gt;

  &lt;p&gt;再见！&lt;/p&gt;

  &lt;p&gt;💥💥💥💥💥&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;在糟糕的案例中，我们并没有定义 X, Y, Z 这三类分别代表什么意思。ChatGPT 虽然会按它的逻辑做好一定的分类，但我们并不一定会满意它的分类结果。我们没有明确定义需求，甚至我们连我们自己需要的东西是什么都还没弄清楚。这时候你就得回到我们的“第一原则”：搞清楚你自己的明确意图是什么。&lt;/p&gt;

&lt;p&gt;更好的案例 ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;案例：&lt;/p&gt;

  &lt;p&gt;这家饭店里有虫子，靠。// X&lt;/p&gt;

  &lt;p&gt;我好喜欢鱼香肉丝。// Y&lt;/p&gt;

  &lt;p&gt;这家店的餐具挺好看的，但是吃的东西一般。// Z&lt;/p&gt;

  &lt;p&gt;🤡🤡🤡🤡 // Z&lt;/p&gt;

  &lt;p&gt;好吧。// Z&lt;/p&gt;

  &lt;p&gt;请将以下文本归类到三个字母：X/Y/Z&lt;/p&gt;

  &lt;p&gt;文本：&lt;/p&gt;

  &lt;p&gt;太难吃了，再也不回来了。&lt;/p&gt;

  &lt;p&gt;环境很糟糕。&lt;/p&gt;

  &lt;p&gt;亚米亚米，会再来！&lt;/p&gt;

  &lt;p&gt;什么鬼玩意儿。&lt;/p&gt;

  &lt;p&gt;再见！&lt;/p&gt;

  &lt;p&gt;💥💥💥💥💥&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;在上面的例子中，我们虽然没有明说 X, Y, Z 是什么意思。但通过案例表达了，X 偏负面评价，Y 偏正面评价，Z 的情绪未明确显露。这个时候 ChatGPT 为我们做好的分类就很接近我们想要的结果了。&lt;/p&gt;

&lt;h3 id=&quot;5-减少模糊的表达明确提出你的需求&quot;&gt;5). 减少模糊的表达，明确提出你的需求&lt;/h3&gt;

&lt;p&gt;糟糕的案例 ❌&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;你总结的产品描述应该非常简练、只包含一些语句、别太多。&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;更好的 ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;用 2-3 句话总结该产品，不超过 30 个字。&lt;/p&gt;

&lt;/blockquote&gt;

&lt;h3 id=&quot;6-告诉他要做什么而不是不要做什么&quot;&gt;6). 告诉他要做什么，而不是不要做什么&lt;/h3&gt;

&lt;p&gt;糟糕的案例 ❌&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;以下是一名客服和一名客户之间的对话。请勿询问用户名或密码。请勿重复。&lt;/p&gt;

  &lt;p&gt;客户：我无法登录我的账户。&lt;/p&gt;

  &lt;p&gt;客服：&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;更好的 ✅&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;以下是客服与顾客之间的对话。客服将尝试诊断问题并提出解决方案，同时避免问任何与用户名、密码相关的问题。请引导用户查看帮助文章 www.samplewebsite.com/help/faq。&lt;/p&gt;

  &lt;p&gt;顾客：我无法登录我的账户。&lt;/p&gt;

  &lt;p&gt;客服：&lt;/p&gt;

&lt;/blockquote&gt;

&lt;h3 id=&quot;7-step-by-step-trick帮助-chatgpt-做推理&quot;&gt;7). “Step by Step” trick，帮助 ChatGPT 做推理&lt;/h3&gt;

&lt;p&gt;也叫做：Chain-of-Thought Prompting。&lt;/p&gt;

&lt;p&gt;实验证明，在应对 zero-shot 问题时，你在问题最后加上“Let’s think step by step”，ChatGPT “显性的推理能力”会得到明显提升。这个就不多展开了，感兴趣的朋友可以看看这篇参考文章：&lt;a href=&quot;https://zhuanlan.zhihu.com/p/527423190&quot;&gt;Prompt learning 系列之 Let’s think step by step&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;最后&quot;&gt;最后，&lt;/h2&gt;

&lt;p&gt;这篇文章的内容还是比较浅显。如果你因此对 Prompt 工程产生了一些兴趣，可以继续阅读 &lt;a href=&quot;https://github.com/dair-ai/Prompt-Engineering-Guide&quot;&gt;Prompt Engineering Guide&lt;/a&gt;，里面包含很多这篇内容没有囊括的有趣话题。比如对抗性提示、怎么解决对话机器人的前后一致性问题、如何改善 AI 输出错误信息或者有偏见信息的问题。其中对抗性提示（Adversarial Prompting）话题包含了如何做到对话机器人的越狱，如何让它说一些 AI 设计者不想让它说的话。&lt;/p&gt;

&lt;p&gt;我是一个普普通通的深度学习初学者，本文如有任何谬误，欢迎拍砖。&lt;/p&gt;
</description>
        <pubDate>Sat, 25 Mar 2023 07:15:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/how-to-write-a-prompt-for-chatgpt/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/how-to-write-a-prompt-for-chatgpt/</guid>
      </item>
    
      <item>
        <title>完成不可能的任务——推荐《如何阅读一本书》</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;本文共 2,400 字，预计阅读时间 6 分钟。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;2022 年过去了，一年读了二十本书，但在豆瓣上“想读的书”不减反增。我发现阅读动力不足的原因是，在阅读了一段时间之后我仍然无法获知这本书与我有什么关系。于是最初的热情就很快消解掉了。&lt;/p&gt;

&lt;p&gt;我时常会带着一些明确的目的和想要解答的疑问去阅读。我自己称之为“功利的阅读”，然而读完一本书的结果反而是令我萌生出了更多的问题，发现了更多可能很精彩的好书。我的书单越来越长，甚至有时会让我横生出一些焦虑感。此时我便会搬出那句庄子的名言来安慰自己：“吾生也有涯，而知也无涯。以有涯随无涯，殆已！”&lt;/p&gt;

&lt;p&gt;有一天在我整理书单的时候，一本躺在“想读”列表里许久的工具书引起了我的注意——《如何阅读一本书》。在读这本书的过程中，我一直有种微妙的荒诞感——我正在通过阅读一本叫《如何阅读一本书》的书来学习如何阅读一本书。&lt;/p&gt;

&lt;p&gt;此书存在不少非议。很多人说，这本书臃肿啰嗦，就阅读这件人人都会的事，两位作者却为此洋洋洒洒写出了 26 万字的长文（中译本的字数）。但是看完这本书之后，它在我心目中仅次于《学会提问》，是世上第二好用的工具书。&lt;/p&gt;

&lt;p&gt;《如何阅读一本书》是阅读技巧的集大成者。然而我并不想在这篇文章中总结书中提到的技巧。只想聊聊书中一些令我醍醐灌顶的观点，如果能让你有兴趣翻开这本书的目录瞧瞧，那便会给我带来莫大的快乐。&lt;/p&gt;

&lt;h3 id=&quot;思维导图怪圈&quot;&gt;思维导图怪圈&lt;/h3&gt;

&lt;p&gt;首先，就是我所遇到的“思维导图怪圈”。你是否有这样的经历：无论你搜索什么知识，总有人梳理好一个巨大的思维导图放在文章的开头。这些需要放大 5 - 6 倍才能看清的巨幅图片里面充斥着各种总结性的短语。对我来说除了头疼就一无所获了。&lt;/p&gt;

&lt;p&gt;我一直很困惑，明明思维导图是这么好用的一个工具，我却总是没法从别人的思维导图中获得知识。为什么会造成这样一个现象呢？书中给出了解答：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;对一本书来说，血肉跟骨架是一样重要的。书，真的就跟人或动物是一模一样的。——血肉，就是为纲要所作的进一步详细解释，或是我们有时候所说的“解读”（read out）。血肉，为全书增添了必要的空间与深度。对动物来说，血肉就是增加了生命。……如果一千页的作品摘成九百页，这样的问题不大。如果一千页的文字浓缩成十页或甚至一页，那么到底留下来的是些什么东西就是个大问题了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;因为思维导图剔除了血肉，只剩骨架，所以显得冰冷不堪。已经掌握这门知识的人可以快速通过思维导图这幅骨架检索到自己死去的回忆，因为血肉已经映在了制图人的脑海中，然而失去血肉的思维导图却无法引导后来者走向坦途。&lt;/p&gt;

&lt;h3 id=&quot;阅读的目的&quot;&gt;阅读的目的&lt;/h3&gt;

&lt;p&gt;第二个有意思的点是阅读的目的。我们究竟是为了什么而阅读？书中提到了三个主要阅读的目的：第一，为了获取资讯而阅读；第二，为了消遣娱乐而阅读；第三，为了提升理解力而阅读。这本书是为第三个目的而写，因为前两种阅读是不需要任何技巧支撑的。书中有个很典型的比喻：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;阅读就是跟一位缺席的老师学习……写作与阅读的东西就像那只球一样，是被主动、有活力的双方所共有的，是由一方开始，另一方终结的。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;“缺席的老师”、“抛接球”，这真是非常形象的比喻！作者强调了老师的缺席，因此你只能靠你自己，而且接球也是一个非常主动的行为，是故“阅读越主动，效果越好”。你会在阅读的过程中遇到很多困难，遇到你难以理解的片段，但你不能依赖任何其他人写的读后感和导读，只有靠你自己克服，你的理解力才能得到真正的提升。&lt;/p&gt;

&lt;h3 id=&quot;什么算读书读得好&quot;&gt;什么算“读书读得好”？&lt;/h3&gt;

&lt;p&gt;第三个令人欣慰的观点是，“要读得更好，永远更好，不过，有时候要读得慢一点，有时候要读得快一点。”&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;大多数人，即使是许多优秀的阅读者，都忽略了检视阅读的价值。他们打开一本书，从第一页开始读起，孜孜不倦，甚至连目录都不看一眼。因此，他们在只需要粗浅翻阅一本书的时候，却拿出了仔细阅读、理解一本书的时间。这就加重了阅读的困难。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;弗兰西斯·培根曾经说过：“有些书可以浅尝即止，有些书是要生吞活剥，只有少数的书是要咀嚼与消化的。”书中阐明了三种不同层次的阅读方法，分别是检视阅读、分析阅读和主题阅读。检视阅读的技巧，就是教会你在 1-2 个小时内大致摸清一本书在说些什么，然后再决定是否需要花精力仔细阅读。这是最初级的技巧，却是最重要的基础。&lt;/p&gt;

&lt;p&gt;书中花了很大的篇幅来介绍如何做精细的分析阅读，但这种方法实在是耗人精力。所以事实上，人的一生也许只能用分析阅读的方法来读为数不多的几本书。如此一来，我们可能需要大量运用检视阅读来排除不需要精读、细读的书。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;当我们说某人读书“读得很好”（Well-read）时，我们心中应该要有这些标准来作衡量的依据。太多时候，我们是用这样的句子来形容一个人阅读的量，而非阅读的质。一个读得很广泛，却读不精的人，与其值得赞美，不如值得同情。就像霍布斯所说：“如果我像一般人一样读那么多书，我就跟他们一样愚蠢了。”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;书单&quot;&gt;书单&lt;/h3&gt;

&lt;p&gt;最后，这本书提供了一个精选的书单。人是如何开始对一本书产生兴趣的？有时候是朋友推荐，有时候是在挖掘自己感兴趣的话题时搜索到了一些书，又或者是通过猜你喜欢、热销榜、评分榜上看到了有意思的书。人可以从一份好的书单中获益良多，既然阅读就是跟一位缺席的老师学习，那你最好保证这位老师的写作和知识水平足够高，牛逼的书单就可以帮你做到这一点。同时，书中所介绍的最高阶阅读方法——主题阅读，是极其依赖书单这件最重要的工具的。&lt;/p&gt;

&lt;h2 id=&quot;孤独的理想主义者&quot;&gt;孤独的理想主义者&lt;/h2&gt;

&lt;p&gt;作者莫提默·艾德勒和查尔斯·范多伦是两位充满理想主义的老师，而他们对于自己的“学生们”——读者们，又非常的严格。他们要求“学生们”必须在了解事情的全貌之后才能做评价。在他们看来，很多时候即便看完一本书，我们的评价只能是“我还不够了解”，而无法给出真正的评判。书里是这样说的：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;同样的状况也发生在其他作者身上，像柏拉图、康德、亚当·斯密与马克思等人——这些人不可能在一本书中将自己所有的思想与知识全部写出来。而那些评论康德《纯粹理性批判》，却根本没看过他《实践理性批判》的人；批评亚当·斯密的《国富论》，却没看过他《道德情操论》（Theory of Moral Sentiments）的人；或是谈论《共产党宣言》，却没有看过马克思《资本论》的人，他们都是在赞成或反对一些自己并不了解的东西。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;人是懒惰的，也是傲慢的，很容易对自己并不了解的事情高谈阔论。两位作者却希望在这个不完美的世界中完成这样一件不可能的任务——教人怎样更好地阅读。要形容像他们这种努力用自己的绵薄之力来对抗这个荒诞世界的行为，现在有个还算时髦的词汇——孤勇者。&lt;/p&gt;
</description>
        <pubDate>Mon, 02 Jan 2023 07:20:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/how-to-read-a-book-recommendation/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/how-to-read-a-book-recommendation/</guid>
      </item>
    
      <item>
        <title>从《有限与无限的游戏》谈起</title>
        <description>&lt;p&gt;唯一不变的是变化。人生总是伴随着各种不确定性，诸如互联网公司的裁员潮、上海面临疫情和社会治理的双重灾难。人，生来更偏好于秩序感，而排斥不确定性。在面对不确定性时，人就很容易陷入焦虑的情绪。&lt;/p&gt;

&lt;p&gt;对抗焦虑有不少做法。在疫情期间，我首先采取了阻断式疗法——删除微博。这种方式简单粗暴，且高效。其次就是在我的方寸之地内寻求有限的秩序感。对过去积累下来的文字、笔记做好梳理，打扫房间，整理桌面，这些都是既简单又能快速让我回归平静的小事。前者屏蔽了干扰，而后者转移了注意力。事实上两者都没有真正消除不确定性。平静的心，会随着新问题的暴露或老问题的重现而波动。如何让自己的内心面对狂风骤雨时，依旧保持澄澈，如何在面对苦痛与磨难时，仍旧维持心灵的防线呢？&lt;/p&gt;

&lt;p&gt;我尝试在书籍这座避难所中寻找答案。&lt;/p&gt;

&lt;h2 id=&quot;有限与无限的游戏&quot;&gt;有限与无限的游戏&lt;/h2&gt;

&lt;p&gt;《有限与无限的游戏》是一本光看名字就觉得很有意思的书，英文名是《Finite And Infinite Games》。而卡斯教授在他对这本书的自述中写道，他是受到博弈论（Game theory）启发而延展出了有限与无限游戏的理论。也许翻译成《有限与无限的博弈》更佳吧。&lt;/p&gt;

&lt;p&gt;“世上至少有两种游戏，一种是有限游戏，一种是无限游戏。”在卡斯的笔触下，绝大多数世上发生的事情都属于有限游戏，而有且仅有一种无限游戏。&lt;/p&gt;

&lt;p&gt;有限游戏以取胜为目的，而无限游戏以延续游戏为目的。一场球赛、一盘棋局，亦或是一场考试，都是典型的有限游戏。无论是有限游戏还是无限游戏，是否加入一场游戏是每一个游戏参与者的自由。如书中所述，甚至奴隶在面对奴役这场有限游戏时，他也是有自己的选择权的。他可以拒绝参与这场关于奴役的有限游戏，但代价很可能是生命。&lt;/p&gt;

&lt;p&gt;有限游戏具有规则的不变性，类似于契约。所有有限游戏的参与者对规则自愿认同并遵守。如果规则发生变化，那么这场有限游戏就不再是原来的游戏了，而是一场完全不同的游戏。而无限游戏具有规则的必变性，规则为了延续游戏而服务。因此我们可以说，有限游戏有明确的边界，而无限游戏没有边界。书中总结了这样一个案例：社会是有限游戏，文化是无限游戏。而王兴对此的理解是“有限游戏在边界内玩，无限游戏却是在和边界，也就是在和‘规则’玩，探索改变边界本身。”&lt;/p&gt;

&lt;p&gt;有限游戏是剧本化的。有限游戏的参与者讨厌惊奇（Surprise）。为了取胜，他必须通过预测来掌控每一个可能发生的意外。对有限游戏的大师级参与者来说，游戏的剧本早已写好，结局在第一幕已经确定。而无限游戏参与者对未知充满开放性，他们喜欢惊奇。&lt;/p&gt;

&lt;p&gt;两种不同的游戏视角，实际上铸就了两种不同的世界观。以我浅显的理解，无限游戏观包含三个内涵：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;正视死亡的必然性，但死亡不是游戏的终点，而是游戏过程中的瞬间。无限游戏参与者的生和死都是为了延续他人的生命。&lt;/li&gt;
  &lt;li&gt;永远对意外和惊喜抱有开放的心态，惊奇才能使无限游戏维持下去。&lt;/li&gt;
  &lt;li&gt;以更高的视域来看待边界，而其终极理想则是没有边界。&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;心灵之盾&quot;&gt;心灵之盾&lt;/h2&gt;

&lt;p&gt;心灵之盾，意为人在主观精神世界里构建出来的防线，不受物质世界的变化为转移。这是我臆想出来的一个词汇。生活中的不确定性犹如随时会发起进攻的利剑，而心灵之盾则为人们维护精神世界的平衡。&lt;/p&gt;

&lt;p&gt;在如何面对不确定性这个问题上，无限游戏观是卡斯教授所传达的心灵之盾。&lt;/p&gt;

&lt;p&gt;心灵之盾和信仰一词的含义接近，它可以通过文字或者言传授教的方式传播。但它又不等同于信仰，也可以仅仅是处世为人的原则。&lt;/p&gt;

&lt;p&gt;心灵之盾有时可以被称为“狭隘的正义”。广义的正义如罗翔教授所说，是客观的。而此处所说的“狭隘的正义”，更接近曾经很火的日剧《胜利即正义》（Legal High）中所说正义。它是一种主观上认同的事情，是个人坚守的阵地。&lt;/p&gt;

&lt;p&gt;桥水基金的创始人瑞·达利欧花费数十年与他的家人、朋友、工作伙伴一起整理了上百条生活与工作的原则，这些原则是他的心灵之盾。瑞和卡斯“传教”的方式都是撰写书籍。宗教则是传播更为广泛的一种心灵之盾，往往都具有上百年的积淀。但我对宗教知之甚少，无法多谈。&lt;/p&gt;

&lt;p&gt;人的认知形成过程不是一瞬间的事情，知识的高塔亦非一夜建成。一条直觉性的捷径是站在先行者的肩膀上，依着他们的心灵之盾来仿制我们自己的心灵之盾。但即便接触到一些令人醍醐灌顶的思考，要真正化为己用仍需要数余年的实践。&lt;/p&gt;

&lt;p&gt;可以说，铸造心灵之盾的过程就是一场修行。&lt;/p&gt;

&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://book.douban.com/subject/33438841/&quot;&gt;有限与无限的游戏&lt;/a&gt;，James P. Carse&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://jamescarse.com/books/finite-and-infinite-games/&quot;&gt;Finite And Infinite Games 英文自述&lt;/a&gt;，James P. Carse&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.bilibili.com/video/BV1E741167P7&quot;&gt;正义是什么&lt;/a&gt;，罗翔&lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Mon, 02 May 2022 15:00:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/mind-shield/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/mind-shield/</guid>
      </item>
    
      <item>
        <title>推荐我 2020 年读过的十本书</title>
        <description>&lt;p&gt;不知道其他人怎么样，我在读书的过程中有时会迸发出一些小火花，将过去埋藏在深处的记忆激发出来。在书中一边寻找答案，一边激活记忆的碎片，这种感觉是非常有意思的。&lt;/p&gt;

&lt;p&gt;去年算是我读书相对以往较多的一年，这既说明了我在过去的一年有非常强烈的成长渴望，也说明了我遭遇了一些困难与瓶颈。非常感谢这些书在这过去的一年里带给我的力量，简单跟大家推荐一下我认可的好书！&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍一数据密集型应用系统设计&quot;&gt;推荐书籍一：&lt;a href=&quot;https://book.douban.com/subject/30329536/&quot;&gt;数据密集型应用系统设计&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;猪书，简称 DDIA，这是一本我 5 星推荐的好书。虽然本书的第 12 章翻译奇差，但瑕不掩瑜，这是一本干货满满的好书。数据密集型应用系统，我相信 90% 的程序员们都很难有机会实操。如果你想要了解如何让自己所掌控的系统健壮而又（在大多数时候）稳定，它会是你最好的帮手之一。它解答了我多年编程生涯以来的各种疑问，推荐给所有 1 年以上工作经验的后端伙伴们。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍二管理学原理与实践&quot;&gt;推荐书籍二：&lt;a href=&quot;https://book.douban.com/subject/3393766/&quot;&gt;管理学：原理与实践&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;又是一本巨厚无比的书（虽然我是在 Kindle 上看的，但真的花了好久！）据说是很多管理学院的教材，因此对我这样的管理新兵来说非常适合。这本书给出了一个基本的框架，从计划、组织、领导和控制四个方面讲述了管理学的实践方法。虽然内容超长但非常通俗易懂，我可以给到 4.5 星。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍三杀死一只知更鸟&quot;&gt;推荐书籍三：&lt;a href=&quot;https://book.douban.com/subject/26879778/&quot;&gt;杀死一只知更鸟&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;这是一本小说，就不剧透了！4.5 星，希望自己未来能成为像阿迪克斯一样的父亲。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍四史蒂夫乔布斯传&quot;&gt;推荐书籍四：&lt;a href=&quot;https://book.douban.com/subject/6798611/&quot;&gt;史蒂夫·乔布斯传&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;非常有意思的一本书，5 星好评。为什么乔布斯能带领苹果、皮克斯走向成功？&lt;/p&gt;

&lt;p&gt;第一，他对自己的产品倾注了百分之一百的热情，不以挣钱为目的，而是做出令自己深信不疑的产品。这是马库拉教会给乔布斯的理念，并伴随了他的一生。&lt;/p&gt;

&lt;p&gt;第二，他永远在探求与最顶尖的人才合作的机会，他认为确保团队优秀是他的责任。没有他们，乔布斯永远达不到如今的成就，像沃兹、乔尼。&lt;/p&gt;

&lt;p&gt;第三，专注。化繁为简是一件极其难的事情，当你面前摆着许多诱惑和可能性时，很容易忘记什么才是真正重要的。但乔布斯做到了，他把“专注”的管理哲学带回了即将倒闭的苹果，并为它带来最辉煌的十年。&lt;/p&gt;

&lt;p&gt;第四，坦诚，也可以说是残酷的诚实，就像个混蛋。但不得不说，你很难既做一个友好的人，又成为一个优秀的管理者。在面对糟糕的状况时，你有时不得不成为一个“坏人”。&lt;/p&gt;

&lt;p&gt;乔布斯是一个普通人，热爱禅学、服用迷幻药、性格反复无常、爱撒谎、擅长使用“现实扭曲力场”来改变他人的想法、刻薄，但他确实也是一位极其富有魅力的领导者。&lt;/p&gt;

&lt;p&gt;他的成功可以说是必然的。他在早期与癌症抗争时采用了错误的方式，但最终导致了他早逝的结果，可能也是一种必然。感谢乔布斯带给这个世界的一切，他存在过。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍五简约至上&quot;&gt;推荐书籍五：&lt;a href=&quot;https://book.douban.com/subject/30253370/&quot;&gt;简约至上&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;很薄的一本书，感觉没多久就看完了。看完乔布斯传又回过头来读此书。感觉确有互通之处。本书一如其名字，且配图合适有趣。所谓大道至简，应如是。5 星&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍六邓小平时代&quot;&gt;推荐书籍六：&lt;a href=&quot;https://book.douban.com/subject/20424526/&quot;&gt;邓小平时代&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;后文革时代，国家内忧外患，跟着书本的思绪回到几十年前还是不由得让人倒吸一口冷气。&lt;/p&gt;

&lt;p&gt;敬佩，给力挽狂澜的邓公打 5 星，给书打 4 星。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍七平衡计分卡战略实践&quot;&gt;推荐书籍七：&lt;a href=&quot;https://book.douban.com/subject/3576464/&quot;&gt;平衡计分卡战略实践&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;知识脉络清晰，比《管理学：原理与实践》更富有实践意义。它给出了一个围绕战略地图的闭环，其中对我最有启发性的有：战略地图、整个组织以怎样的方式协同作战、对预算的解读。我更偏爱实践一些，因此本书我可以给 5 星。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍八学会提问&quot;&gt;推荐书籍八：&lt;a href=&quot;https://book.douban.com/subject/20428922/&quot;&gt;学会提问&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;本书的核心要点在于推崇批判性思维，且给出一些进行批判性思维的方式。虽然有些评论指出此书内容过于基础，但我却感觉它对我有很大帮助。对很多日常生活就会经历的逻辑问题，我确实已经有一些碎片化的认知，但这本书系统化的梳理又帮我好好捋了一下，可谓点睛之笔。我给 5 星。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍九俞军产品方法论&quot;&gt;推荐书籍九：&lt;a href=&quot;https://book.douban.com/subject/34907971/&quot;&gt;俞军产品方法论&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;久闻俞军大名。书中作者抛出了很多看似玄妙的概念和公式，实际不难理解。作者所提倡的逻辑为先、做正确的事，正是我所信仰的思考方式。本书叫做产品方法论，可实践的内容也确实充实。美中不足的是附录中的文章内容大多没有经过梳理，有价值的信息量骤降。本书给 4 星。&lt;/p&gt;

&lt;h3 id=&quot;推荐书籍十被讨厌的勇气&quot;&gt;推荐书籍十：&lt;a href=&quot;https://book.douban.com/subject/26369699/&quot;&gt;被讨厌的勇气&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;因“越自卑的人越自负”这句话而认识了这本书，认识了阿德勒。这是一本讲心理学的书，组织形式类似于古希腊先哲的对话录，也可以类比《论语》。罗老师（教刑法那位）说过，勇气是现代人最缺乏，也最宝贵的品质之一。而阿德勒的心理学，正是勇气的心理学。初读这本书会感到书中的观点很多都是反常识的，其中有诸多一眼看上去不大对味的“暴论”：“自由就是被别人讨厌”，“「拼命寻求认可」反而是以自我为中心”，“表扬和批评都不行”。但书中又以一种很温暖地方式教会你如何用一种全新的思考方式（目的论）来获得勇气。&lt;/p&gt;

&lt;p&gt;如果你遭遇了一些困顿，可以尝试跟书中的哲人聊聊看。心理学大都依赖于大量实验来证明一些结论，甚至可以称心理学为实验科学。但阿德勒的心理学则依赖于逻辑推演，到底孰优孰劣，很难下一个定论。而在一定程度上，我认可此书的逻辑，因此我给 5 星。&lt;/p&gt;

&lt;h2 id=&quot;后记&quot;&gt;后记&lt;/h2&gt;

&lt;p&gt;有时候看得太多，想得太多，也会产生一些迷茫的情绪。近期就险些落入虚无主义的圈套，就用庄子中的一句话跟大家共勉吧。希望大家在汲取知识养分之时，也不要迷失了前方的路。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;吾生也有涯，而知也无涯。以有涯随无涯，殆已！已而为知者，殆而已矣！为善无近名，为恶无近刑，缘督以为经，可以保身，可以全生，可以养亲，可以尽年。 —— 庄子·内篇·养生主第三&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Sat, 13 Feb 2021 11:31:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/2021-recommended-book-list/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/2021-recommended-book-list/</guid>
      </item>
    
      <item>
        <title>HitKounter 替换 CDN 服务地址的公告</title>
        <description>&lt;p&gt;三年前，我发布了一个用于统计博客访问量的小工具，HitKounter。这些年来不少用户正在使用这个小玩意儿，这让我感到很开心！&lt;/p&gt;

&lt;p&gt;但是最近出了一些小问题。之前我将 HitKounter JavaScript 脚本直接上传到了又拍云的对象存储中。那时我直接将又拍云提供的测试访问链接开放出来，以供大家使用。&lt;/p&gt;

&lt;p&gt;由于本站一直使用的是 Github Pages 服务，尚未备案。因此由于最近又拍云服务政策的更变，已无法再享受到又拍云的服务。曾经公布的 CDN 地址不得不作废了，将在 2019 年 6 月 5 日失效。现在大家可以通过以下链接进行访问：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://sinacloud.net/egg-lib/hit-kounter/hit-kounter-lc-0.4.1.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;感谢大家一如既往的支持！&lt;/p&gt;
</description>
        <pubDate>Fri, 31 May 2019 15:00:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/hit-kounter-notification/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/hit-kounter-notification/</guid>
      </item>
    
      <item>
        <title>像呼吸一样自然：React hooks + RxJS</title>
        <description>&lt;p&gt;上个月的 React Conf 上，React 核心团队首次将 hooks 带到的公众们的眼前。起初我看到这样奇怪的东西，对它是很抗拒的。Dan 说 JavaScript 里的 this 太黑了，从其他语言转来写 React 的人会很不适应。然而 hooks 本质上也是一种黑魔法，需要理解它的本质依旧需要对 JS 的各种闭包和作用域的问题搞得很透彻才行。&lt;/p&gt;

&lt;p&gt;然而后来，跟 hooks 打了几天交道以后，我感觉这个想法还是挺有意思的。首先推荐一下 React Conf 上的开篇演讲：&lt;a href=&quot;https://www.youtube.com/watch?v=dpw9EHDh2bM&quot;&gt;React Today and Tomorrow and 90% Cleaner React With Hooks&lt;/a&gt;，值得一看。&lt;/p&gt;

&lt;p&gt;我们团队一直对 RxJS 青睐有加，但一直苦于它和 React 结合起来使用实在是有些繁琐。上周 @太狼 就决定在 hooks api 上试试水。结果那一整天我都听见身边在喊，“真香”。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/rxjs-hooks/真香.gif&quot; alt=&quot;真香&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;rxjs-hooks&quot;&gt;rxjs-hooks&lt;/h2&gt;

&lt;p&gt;那么用 hooks 写 RxJS 代码究竟有多香呢？让我们一起来看看，这个让妈妈开心，开了又开的开源项目：&lt;a href=&quot;https://github.com/LeetCode-OpenSource/rxjs-hooks&quot;&gt;LeetCode-OpenSource/rxjs-hooks&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/rxjs-hooks/ben-lesh.png&quot; alt=&quot;ben-lesh-twitter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们有完整的测试用例，测试覆盖率 100%。目前一共只有两个 hooks：&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useObservable&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useEventCallback&lt;/code&gt;。还是直接用例子解释来得简单明了，让我们首先回想一下，怎么在 React Component 中创建、订阅，并销毁一个流。大概是这个样子：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;rxjs&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;tap&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;rxjs/operators&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Timer&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;subscription&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Subscription&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sub&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
	  &lt;span class=&quot;nx&quot;&gt;tap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}))&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;componentWillUnmount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subscription&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;unsubscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;nx&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;手动订阅，手动管理声明周期，还要通过 React 中的 state 搭建一个与 render 函数 (UI) 之间的桥梁。那么使用 rxjs-hooks 之后呢：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;react&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;rxjs&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useObservable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;rxjs-hooks&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useObservable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;没有手动订阅，不需要再理会生命周期的管理。只需要一个&lt;a href=&quot;https://bundlephobia.com/result?p=rxjs-hooks@0.2.0&quot;&gt;不到 1kb 的依赖&lt;/a&gt;，就能在 React 世界里快乐地拥抱 RxJS 。&lt;/p&gt;

&lt;h3 id=&quot;api-详解&quot;&gt;API 详解&lt;/h3&gt;

&lt;p&gt;本小节中将结合一些例子来简单介绍一下 rxjs-hooks 中的两个 API。详细的类型定义可以 &lt;a href=&quot;https://github.com/LeetCode-OpenSource/rxjs-hooks#apis&quot;&gt;访问这里&lt;/a&gt; 查看。下面会结合例子进行讲解，这样应该会比较通俗易懂一点。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;以下案例均基于 RxJS 6&lt;/li&gt;
  &lt;li&gt;如果对 React hooks 不够了解，建议先看文首推荐的视频或 &lt;a href=&quot;https://reactjs.org/docs/hooks-intro.html&quot;&gt;React 官方博客&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;useobservable&quot;&gt;useObservable&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;案例 1：无默认值，不依赖外部状态&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useObservable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;在此案例中，仅传递了第一个参数，它是 Observable 的工厂函数，需要返回一个 Observable，而 useObservable 的返回值永远是流的最新值。首次渲染只有一个内容为空的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;h1&amp;gt;&lt;/code&gt;；1 秒后，内容变为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0&lt;/code&gt;；2 秒后，内容变为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1&lt;/code&gt;…&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;案例 2：有默认值&lt;/strong&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useObservable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;在第二个案例中，我们传递了第二个参数，它就是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;val&lt;/code&gt; 的默认值。所以在这种情况下，首次渲染的内容不再为空，而是 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-1&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;案例 3：依赖上一次的执行状态&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;如果你需要在流中获得上一次输出的结果时，工厂函数会传入一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state$&lt;/code&gt; 流来帮助你做到这一点。（此处一定要使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;withLatestFrom&lt;/code&gt; 来结合这个流，否则会造成无限循环）&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useObservable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;withLatestFrom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(([&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;prevVal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;prevVal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// first render:    0&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// 1s later:        1    (1 + 0)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// 2s later:        3    (2 + 1)  &lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// 3s later:        6    (3 + 3)&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// 4s later:       10    (4 + 6)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;strong&gt;案例 4：依赖外部状态&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;工厂函数可以依赖一些外部传入的状态，通过 useObservable 的第三个参数传入（和 &lt;a href=&quot;https://reactjs.org/docs/hooks-reference.html#useeffect&quot;&gt;useEffect&lt;/a&gt;，&lt;a href=&quot;https://reactjs.org/docs/hooks-reference.html#usememo&quot;&gt;useMemo&lt;/a&gt; 的接口类似）&lt;/p&gt;

&lt;p&gt;如果传递了第三个参数，那么工厂函数中，就会得到两个流，分别为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;input$&lt;/code&gt; 和 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state$&lt;/code&gt;。在下面的例子中，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;input$&lt;/code&gt; 流发出的值总是一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[a, b]&lt;/code&gt; 元组。为了使例子比较易于理解，所以我们暂时不使用 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state$&lt;/code&gt; 流。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useObservable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;inputs$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;_state$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;combineLatest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;inputs$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(([&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/button&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Timer&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/button&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;这个例子相对较为复杂，可以结合 &lt;a href=&quot;https://codesandbox.io/s/8y5nx3pyo8&quot;&gt;live demo&lt;/a&gt; 理解。&lt;/p&gt;

&lt;h4 id=&quot;useeventcallback&quot;&gt;useEventCallback&lt;/h4&gt;

&lt;p&gt;我们相信 RxJS 不仅十分擅长处理数据流，同时在处理一些交互逻辑上也有很大的帮助。因此我们设计了第二个 API &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useEventCallback&lt;/code&gt;，它接受的三个参数。其中，后两个参数与 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useObservable&lt;/code&gt; 有很大相似之处，因此这边着重介绍第一个形参与返回值。&lt;/p&gt;

&lt;p&gt;首先来看看下面的例子 (&lt;a href=&quot;https://codesandbox.io/s/jpjr31qmw&quot;&gt;live demo&lt;/a&gt;)，可以很容易地看出：返回值和 useEventCallback 不一样了，它会返回一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[callback, value]&lt;/code&gt; 元组。同时接受的工厂函数，接受一个 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;event$&lt;/code&gt; 参数，每当 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;callback&lt;/code&gt; 被调用时，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;event$&lt;/code&gt; 流总会有一个新的值流出。而 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;useEventCallback&lt;/code&gt; 函数的第二个参数依旧是我们熟悉的默认值。&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clickCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;useEventCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;event$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pipe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;innerHTML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clientX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clientY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;nothing&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;click&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;{description}&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;was&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;clicked&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/h1&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clickCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;click&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/button&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clickCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;click&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;you&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/button&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clickCallback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;click&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;him&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/button&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h3 id=&quot;更多实际案例&quot;&gt;更多实际案例&lt;/h3&gt;

&lt;p&gt;这里附上一些简单的实际案例，可以帮助大家进一步理解 rxjs-hooks 的用法。代码就不贴在正文中啦，有兴趣的小伙伴可以访问下面案例中的在线链接玩一下。&lt;/p&gt;

&lt;h4 id=&quot;案例-1drag-me&quot;&gt;案例 1：Drag me&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://codesandbox.io/s/9382vrr4xy&quot;&gt;live demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/rxjs-hooks/drag.gif&quot; alt=&quot;drag&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;案例两栏-resizable-布局&quot;&gt;案例：两栏 resizable 布局&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://codesandbox.io/s/k9609z20w5&quot;&gt;live demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/rxjs-hooks/resizer.gif&quot; alt=&quot;resizer&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;案例尾随队列&quot;&gt;案例：尾随队列&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://codesandbox.io/s/94qm201pw4&quot;&gt;live demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/rxjs-hooks/drag-list.gif&quot; alt=&quot;drag-list&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;小结&quot;&gt;小结&lt;/h2&gt;

&lt;p&gt;至此 &lt;a href=&quot;https://github.com/LeetCode-OpenSource/rxjs-hooks&quot;&gt;rxjs-hooks&lt;/a&gt; 就先介绍到这儿。我们的实现不一定是对 hooks 最好的理解，权当抛砖引玉。很期待社区有更多人能参与到这项变革中来，我们也很乐意和大家分享所遇到的各种踩坑之旅。同时，随时欢迎大家给这个项目提 issue 或者 PR。&lt;/p&gt;

</description>
        <pubDate>Mon, 26 Nov 2018 16:53:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/rxjs-hooks/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/rxjs-hooks/</guid>
      </item>
    
      <item>
        <title>阻碍你使用 GraphQL 的十个问题</title>
        <description>&lt;p&gt;在最近半年中，LeetCode 的一些新功能已经开始尝试使用 GraphQL。如果你在 LeetCode 网站中查看一下开发者工具中收集到的请求，也许会发现一个与众不同的请求 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST https://leetcode.com/graphql/&lt;/code&gt;。是的，要是你想给 LeetCode 写些爬虫的话，可得好好研究一下我们在这个 Endpoint 下挂载了哪些数据。&lt;/p&gt;

&lt;p&gt;我在使用 GraphQL 的过程中经历了理解、误解、再理解的过程。作为吃了 GraphQL 这个螃蟹的人，希望能够通过这篇文章更好地帮助各位读者理解 GraphQL 是什么，GraphQL 会给你带来什么，以及将 GraphQL 应用于你的系统中需要注意哪些问题。这不是一篇系统的科普文，如果你有什么其他疑问可以评论中留言询问。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;以下内容皆为作者个人理解，如果错误，欢迎讨论指出。我会随时修正，拜谢！&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;1-什么是-graphql&quot;&gt;1. 什么是 GraphQL？&lt;/h2&gt;

&lt;p&gt;从官方的定义来说，GraphQL 是一种针对 API 的查询语言；在我看来，&lt;a href=&quot;https://facebook.github.io/graphql/&quot;&gt;GraphQL 是一种标准&lt;/a&gt;，而与标准相对的便是实现。就像 EcmaScript 与 JavaScript 的关系，从一开始你就&lt;strong&gt;需要有这样一种认知&lt;/strong&gt;：GraphQL 只定义了这种查询语言语法如何、具体的语句如何执行等。&lt;strong&gt;但是&lt;/strong&gt;，你在真正使用&lt;strong&gt;某种 GraphQL 的服务端实现&lt;/strong&gt;时，是有可能发现 GraphQL 标准中所描述的特性尚未被实现；或者这种 GraphQL 的实现扩展了 GraphQL 标准所定义的内容。&lt;/p&gt;

&lt;p&gt;举例来说，就像 ES 2017 标准正式纳入了 async/await，而从实现的角度上说，IE 没有实现这一标准，而 Edge 16 和 Chrome 62 则实现了这一标准（数据来源于 &lt;a href=&quot;https://caniuse.com/#feat=async-functions&quot;&gt;caniuse&lt;/a&gt;）说回 GraphQL 标准，与之相对的有&lt;a href=&quot;https://graphql.org/code/&quot;&gt;相当多的服务器端实现&lt;/a&gt;。他们的大多遵循 GraphQL 标准来实现，但也可能稍有差别，这一切需要你自己去探索。&lt;/p&gt;

&lt;h2 id=&quot;2-如何从零入门-graphql&quot;&gt;2. 如何从零入门 GraphQL？&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;先看标准：https://graphql.org/ （纯 GraphQL，与任何什么 JavaScript, Python 都无关）&lt;/li&gt;
  &lt;li&gt;再看服务端实现：到 https://graphql.org/code/ 里找到跟你的服务端技术有关的实现&lt;/li&gt;
  &lt;li&gt;再看客户端实现：&lt;a href=&quot;https://facebook.github.io/relay/&quot;&gt;Relay&lt;/a&gt; 或 &lt;a href=&quot;https://www.apollographql.com/docs/react/&quot;&gt;appollo-client&lt;/a&gt;, etc.&lt;/li&gt;
  &lt;li&gt;学习使用 DataLoader 来获取列表数据&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;3-graphql-与-restful-有什么区别&quot;&gt;3. GraphQL 与 RESTful 有什么区别？&lt;/h2&gt;

&lt;p&gt;首先放上一张来自于 graphql.org 的图片。REST 与 GraphQL 都是服务端所承载的系统对外的服务接口，因此两者肯定是可以共存的，甚至可以共用一套 Authorization 等业务逻辑。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/backend-arch.png&quot; alt=&quot;Architecture&quot; /&gt;&lt;/p&gt;

&lt;p&gt;那么 GraphQL 与 RESTful 的具体区别有什么呢？我觉得主要是两点。&lt;/p&gt;

&lt;h4 id=&quot;1-入口-entry-point&quot;&gt;1. 入口 (entry point)&lt;/h4&gt;

&lt;p&gt;RESTful 的核心理念在于资源 (resource)，且讲究一个 RESTful 接口仅操作单一资源；因此在你使用 RESTful 时，会设计出大量的接口。GraphQL 是单一入口，一般配置在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[host]/graphql/&lt;/code&gt;，所有的资源都从该入口通过 graphql 的语句获取或修改（当然 GraphQL 亦支持多入口，但显然多入口的数量也远小于 RESTful）。&lt;/p&gt;

&lt;h4 id=&quot;2-数据的关联性&quot;&gt;2. 数据的关联性&lt;/h4&gt;

&lt;p&gt;RESTful 所操作的资源相对是离散的；而 GraphQL 的数据更有整体性。&lt;/p&gt;

&lt;p&gt;举个例子，如果要获取 A 的朋友的朋友，用 RESTful 该怎么做呢？&lt;/p&gt;

&lt;p&gt;假设我们有这样一个接口：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;GET /user/:userId/friends/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;而 A 有 20 个好朋友，那么我们总共需要发送 20 + 1 = 21 次 REST 请求。&lt;/p&gt;

&lt;p&gt;或者我们为了这种特殊场景设计出以下接口：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;GET /user/:userId/friendsAndHisFriends/&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;emmmmm… 虽然看起来很别扭，但是只需要一次请求呢！&lt;/p&gt;

&lt;p&gt;那么在 GraphQL 中，怎么做呢？&lt;/p&gt;

&lt;p&gt;首先我们需要给 User 定义 Schema (GraphQL 有一套完整的&lt;a href=&quot;https://graphql.org/learn/schema/&quot;&gt;类型系统&lt;/a&gt;)：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;type User {
  id: ID!
  name: String!
  friends: [User]
}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;假设我们在 Graph root 上只挂了一个 Node，叫 user:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;type Query {
  user(id: ID!): User
}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;那么我们从客户端发送的 query 就可以写成这样：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;query ($&lt;/span&gt;userId: ID&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;  user(id: $&lt;/span&gt;userId&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;    name
    friends {
      name
      friends {
        name
      }
    }
  }
}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;最后这一个请求就搞定查询朋友的朋友这个蛋疼的需求啦！机智的你肯定已经发现了：这个 query 是不是可以无限循环地写下去？你想的没错，确实可以这么干！在 GraphQL 的官网上是这么形容自己的：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;It’s Graphs All the Way Down &lt;a href=&quot;https://en.wikipedia.org/wiki/Turtles_all_the_way_down&quot;&gt;*&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;它就像是一颗无限向下延伸的树。所以在我看来，GraphQL 更应该叫 TreeQL，当然在图论里，Tree 就是 Graph 也没毛病啦。需要注意的是，这也会引出 “N + 1 problem” 的话题——naive 的 GraphQL 服务端实现会让这段 query 变得异常慢！&lt;/p&gt;

&lt;p&gt;怎么解决这个棘手的问题？心急的小伙伴请跳转到 &lt;a href=&quot;#61-n1-问题&quot;&gt;6.1 N+1 问题&lt;/a&gt;！&lt;/p&gt;

&lt;h2 id=&quot;4-graphql-能做到修改数据吗&quot;&gt;4. GraphQL 能做到修改数据吗？&lt;/h2&gt;

&lt;p&gt;看了上面的 query 的例子，你肯定很好奇，graphql 这种看上去好像只为查询而存在的语言，是不是有办法做到修改数据呢？&lt;/p&gt;

&lt;p&gt;答案是：能。&lt;/p&gt;

&lt;p&gt;仅仅为了使得 GraphQL 这个 data platform &lt;strong&gt;变得更加完整&lt;/strong&gt;，GraphQL 标准中加入了一种操作符，名为 &lt;strong&gt;mutation&lt;/strong&gt;。因为我觉得这种设计确实比较一般，此处就不举例了，详情见：&lt;a href=&quot;https://graphql.org/learn/queries/#mutations&quot;&gt;https://graphql.org/learn/queries/#mutations&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;5-graphql-与-restful-相比有什么优点&quot;&gt;5. GraphQL 与 RESTful 相比有什么优点？&lt;/h2&gt;

&lt;h4 id=&quot;1-数据的关联性和结构化更好&quot;&gt;1. 数据的关联性和结构化更好&lt;/h4&gt;

&lt;p&gt;这一点已经在本文的第 3 个问题中有所描述。&lt;/p&gt;

&lt;h4 id=&quot;2-更易于前端缓存数据&quot;&gt;2. 更易于前端缓存数据&lt;/h4&gt;

&lt;p&gt;这个一般像 Relay 和 apollo-client 都替你做好了，如果你想了解它的缓存原理，请移步 &lt;a href=&quot;https://graphql.org/learn/caching/&quot;&gt;GraphQL Caching&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;3-versionless-api&quot;&gt;3. Versionless API&lt;/h4&gt;

&lt;p&gt;相比于 RESTful 为了兼容新老客户端所添加的版本号，在 GraphQL 中，如果你需要服务端提供与以前不一样的行为，只需要修改 root Query 的定义，在上面额外添加你想要的 Node 即可。&lt;/p&gt;

&lt;h4 id=&quot;4-更健壮的接口&quot;&gt;4. 更健壮的接口&lt;/h4&gt;

&lt;p&gt;不用再因为在缺乏沟通的情况下修改接口，而为系统埋下不稳定的定时炸弹。一切面向前端的接口都有强类型的 Schema 做保证，且完整类型定义因 &lt;a href=&quot;https://graphql.org/learn/introspection/&quot;&gt;introspection&lt;/a&gt; 完全对前端可见，一旦前端发送的 query 与 Schema 不符，能快速感知到产生了错误。&lt;/p&gt;

&lt;h4 id=&quot;5-令人期待的-subscription&quot;&gt;5. 令人期待的 subscription&lt;/h4&gt;

&lt;p&gt;如何在浏览器中接受服务端的推送信息是个老生常谈的问题。从最初的轮询，到后来的 WebSocket。如今 GraphQL 也计划引入除了 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;query&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mutation&lt;/code&gt; 以外的第三种操作符 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subscription&lt;/code&gt;，以便于直接接受服务器推送数据。在 2015 年底 GraphQL 官方发布了一篇博文：&lt;a href=&quot;https://graphql.org/blog/subscriptions-in-graphql-and-relay/&quot;&gt;Subscriptions in GraphQL and Relay&lt;/a&gt; 来介绍 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;subscription&lt;/code&gt; 在他们的 iOS 和 Android App 中的应用。可惜的是相关的代码仍未开源，目前开源社区能找到的解决方案目前只有 Apollo 社区为 Node.js 写的 &lt;a href=&quot;https://github.com/apollographql/graphql-subscriptions&quot;&gt;graphql-subscriptions&lt;/a&gt;。&lt;/p&gt;

&lt;h2 id=&quot;6-graphql-有什么缺点&quot;&gt;6. GraphQL 有什么缺点？&lt;/h2&gt;

&lt;p&gt;说了 GraphQL 的那么多优点，那么它有没有缺点呢？当然也是有的。&lt;/p&gt;

&lt;h4 id=&quot;61-n1-问题&quot;&gt;6.1. N+1 问题&lt;/h4&gt;

&lt;p&gt;最大的问题莫过于：在实现 GraphQL 服务端接口时，很容易就能写出效率极差的代码，引起 “N+1 问题”。&lt;/p&gt;

&lt;p&gt;什么是 N+1 问题？首先我们来举个简单的例子：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;score&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;这是一段简单的 python 代码，使用了 Django 的 QuerySet 来从数据库抓取数据。假设我们的数据库中有两张表 User 和 UserScore 这两张表的关系如下所示：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/graphql-uml.jpg&quot; alt=&quot;UML&quot; /&gt;&lt;/p&gt;

&lt;p&gt;由于用户的分数并没有保存在 User 表中，又因为 QuerySet 有 lazy load 的特性，所以在 for 循环中，每一次获取 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;user.score&lt;/code&gt; 都会查一次表，最终原本 1 次数据库查询能搞定的问题，却在不恰当的实现中产生了 N+1 次对数据库的访问。&lt;/p&gt;

&lt;p&gt;相对于 RESTful，在 GraphQL 中更加容易引起 N+1 问题。主要是由于 GraphQL query 的逐层解析方式所引起的，关于 GraphQL 如何执行 query 的细节，可以参阅 &lt;a href=&quot;https://graphql.org/learn/execution/&quot;&gt;Graphql Execution&lt;/a&gt;。&lt;/p&gt;

&lt;h4 id=&quot;62-如何解决在-graphql-中的-n--1-问题&quot;&gt;6.2. 如何解决在 GraphQL 中的 N + 1 问题？&lt;/h4&gt;

&lt;p&gt;以下解决方案仅针对关系型数据库，如果你的项目中使用的是 NoSQL，可能解决方案有较大差别。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;针对&lt;strong&gt;一对一&lt;/strong&gt;的关系（比如我上面举例中提到的这个 User 与 UserScore 的关系），在从数据库里抓取数据时，就将所需数据 join 到一张表里。别等着 ORM 框架替你懒加载那些你需要的数据。&lt;/li&gt;
  &lt;li&gt;针对&lt;strong&gt;多对一或者多对多&lt;/strong&gt;的关系，你就要用到一个叫做 &lt;strong&gt;DataLoader&lt;/strong&gt; 的工具库了。其中，Facebook 为 Node.js 社区提供了 &lt;a href=&quot;https://github.com/facebook/dataloader&quot;&gt;DataLoader 的实现&lt;/a&gt;。DataLoader 的主要功能是 batching &amp;amp; caching，可以将多次数据库查询的请求合并为一个，同时已经加载过的数据可以直接从 DataLoader 的缓存空间中获取到。这个话题要是展开说也得写一篇新的文章了，此处不多赘述。&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;7-有什么可以快乐地调试-graphql-接口的方法&quot;&gt;7. 有什么可以快乐地调试 GraphQL 接口的方法？&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/graphql/graphiql&quot;&gt;GraphiQL&lt;/a&gt; / &lt;a href=&quot;https://graphql.org/swapi-graphql/&quot;&gt;live demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;使用 GraphiQL 可以很容易地让人感受到“代码即文档”的快乐。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://sinacloud.net/heaven-blog-files/images/posts/graphiql-screenshot.png&quot; alt=&quot;GraphiQL screenshot&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;8-如何选择-graphql-的客户端实现&quot;&gt;8. 如何选择 GraphQL 的客户端实现？&lt;/h2&gt;

&lt;p&gt;客户端常见的框架有 &lt;a href=&quot;https://facebook.github.io/relay/&quot;&gt;Relay&lt;/a&gt; 和 &lt;a href=&quot;https://www.apollographql.com/client/&quot;&gt;Apollo Client&lt;/a&gt;。Relay 是由 Facebook 官方提供的解决方案，而 Apollo 则是在 GraphQL 方面热度超高的社区。&lt;/p&gt;

&lt;p&gt;使用 Relay 的好处是，许多 GraphQL 的服务端框架都会支持 Relay 的标准（比如数据的分页接口）。而 apollo-client 的实现其实又在诸多方面宣称自己兼容 Relay 的风格，所以使用起来应该也是大同小异。当然笔者并没有真实地使用过 Relay，在  GraphQL 方面的经验也不够深刻，所以也不好妄下断言。&lt;/p&gt;

&lt;p&gt;做技术选型时，同事 Ashish 说担心 Relay 太过于重量级，所以并没有决定使用 Relay。这种选择的正确性尚待考证，目前在 LeetCode 实际项目中使用了 apollo-client。&lt;/p&gt;

&lt;h2 id=&quot;9-graphql-中是怎么处理分页的&quot;&gt;9. GraphQL 中是怎么处理分页的？&lt;/h2&gt;

&lt;p&gt;这是一个可能让 GraphQL 初学者担忧的问题，又是一个可以从&lt;a href=&quot;https://graphql.org/learn/pagination/&quot;&gt;官方文档&lt;/a&gt;中找到答案的问题。&lt;/p&gt;

&lt;p&gt;再以找朋友为例，借用 SQL 查询中常用的筛选方法，分页接口可以设计为：&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;gp&quot;&gt;query ($&lt;/span&gt;userId: ID&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gp&quot;&gt;  user(id: $&lt;/span&gt;userId&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;    name
    friends(first: 2, offset: 3) {
      name
    }
  }
}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;上面的例子意为从 $userId 的第 4 个朋友开始算起，取前 2 个朋友。&lt;/p&gt;

&lt;p&gt;类似地，分页接口还可以设计为&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;friends(first: 2, after: $friendId)&lt;/code&gt;;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;friends(first: 2, after: $friendCursor)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;无论分页接口设计成怎么样，都需要&lt;strong&gt;前后端共同的&lt;/strong&gt;封装与支持。其中 Relay 风格的分页接口在各大前后端 GraphQL 框架中基本都已有比较完整的实现。&lt;/p&gt;

&lt;h4 id=&quot;91-relay-风格的分页接口&quot;&gt;9.1 Relay 风格的分页接口&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;参阅 &lt;a href=&quot;https://facebook.github.io/relay/graphql/connections.htm&quot;&gt;Relay Cursor Connections Specification&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;注：apollo-client 兼容该分页接口&lt;/li&gt;
&lt;/ul&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-console&quot; data-lang=&quot;console&quot;&gt;&lt;span class=&quot;go&quot;&gt;query {
  user {
    name
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;    friends(first: 2, after: $&lt;/span&gt;cursor&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;go&quot;&gt;      edges {
        cursor
        node {
          id
          name
        }
      }
      pageInfo {
        hasNextPage
      }
    }
  }
}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;10-graphql-中是怎么实现用户校验的&quot;&gt;10. GraphQL 中是怎么实现用户校验的？&lt;/h2&gt;

&lt;p&gt;你可以回看一下 &lt;a href=&quot;#3-graphql-与-restful-有什么区别&quot;&gt;3. GraphQL 与 RESTful 有什么区别&lt;/a&gt; 中展示的图片，答案就在其中：Authentication 属于业务逻辑层干的事情，别让 GraphQL 承担太多工作啦。&lt;/p&gt;

&lt;p&gt;扩展阅读：&lt;a href=&quot;https://graphql.org/learn/authorization/&quot;&gt;GraphQL Authentication&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;小结&quot;&gt;小结&lt;/h2&gt;

&lt;p&gt;鉴于网上中文的 GraphQL 资料比较有限，所以根据笔者自己的理解，总结出了此文。这十个问题可能是我入门 GraphQL 时比较关心的问题，不一定完全适用于所有人。由于篇幅所限，文中有很多细节并未展开，如果你对哪些问题想要有更深入的理解，GraphQL 官方文档是很重要的资源。此文仅作抛砖引玉之用，希望社区中能有更多关于 GraphQL 使用姿势的分享。&lt;/p&gt;

&lt;p&gt;另外，我们 LeetCode 上海的招聘工作会在春节后全面展开，欢迎投递简历。&lt;a href=&quot;https://leetcodechina.com/jobs/&quot;&gt;https://leetcodechina.com/jobs/&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;参考文献&quot;&gt;参考文献&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://facebook.github.io/graphql/&quot;&gt;GraphQL Specification&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://caniuse.com/#feat=async-functions&quot;&gt;Async functions - caniuse&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://graphql.org/&quot;&gt;Learn GraphQL&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://segmentfault.com/a/1190000004586237#articleHeader5&quot;&gt;GraphQL and Relay 浅析&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://graphql.org/blog/subscriptions-in-graphql-and-relay/&quot;&gt;Subscriptions in GraphQL and Relay&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://facebook.github.io/relay/graphql/connections.htm&quot;&gt;Relay Cursor Connections Specification&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Mon, 19 Feb 2018 04:57:00 +0000</pubDate>
        <link>https://jerryzou.com/posts/10-questions-about-graphql/</link>
        <guid isPermaLink="true">https://jerryzou.com/posts/10-questions-about-graphql/</guid>
      </item>
    
  </channel>
</rss>
